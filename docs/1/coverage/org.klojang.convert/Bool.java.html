<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Bool.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Klojang Convert</a> &gt; <a href="index.source.html" class="el_package">org.klojang.convert</a> &gt; <span class="el_source">Bool.java</span></div><h1>Bool.java</h1><pre class="source lang-java linenums">package org.klojang.convert;

import java.util.Set;

import static java.lang.Boolean.FALSE;
import static java.lang.Boolean.TRUE;

/**
 * Converts values from various non-boolean types to boolean values. Where
 * applicable, {@code null} is accepted as an argument and evaluates to
 * {@code false}. Values evaluating to {@code true} and values evaluating to
 * {@code false} will both be tightly defined, rather than (for example) 1 counting
 * as {@code true} and anything else as {@code false}. If an argument is neither a
 * {@code true} value nor a {@code false} value, an {@link IllegalArgumentException}
 * is thrown. The static method use the {@link #TRUE_STRINGS} and
 * {@link #FALSE_STRINGS} sets to determine if a {@code String} is true-ish or falsy.
 * You can also instantiate the {@code Bool} class with your own {@code true} strings
 * and {@code false} strings.
 *
 * @author Ayco Holleman
 */
public class Bool {

  /**
   * The default set of strings that count as {@code true} values (ignoring case):
   * &quot;true&quot;, &quot;1&quot;, &quot;yes&quot;, &quot;on&quot;, &quot;enabled&quot;.
   */
<span class="fc" id="L28">  public static final Set&lt;String&gt; TRUE_STRINGS = Set.of(&quot;true&quot;,</span>
      &quot;1&quot;,
      &quot;yes&quot;,
      &quot;on&quot;,
      &quot;enabled&quot;);

  /**
   * The default set of strings that count as {@code false} values (ignoring case):
   * &quot;false&quot;, &quot;0&quot;, &quot;false&quot;, &quot;off&quot;, &quot;disabled&quot;.
   */
<span class="fc" id="L38">  public static final Set&lt;String&gt; FALSE_STRINGS = Set.of(&quot;false&quot;,</span>
      &quot;0&quot;,
      &quot;no&quot;,
      &quot;off&quot;,
      &quot;disabled&quot;);

  /**
   * Attempts to convert the specified object to a {@code Boolean}. This is done by
   * delegating to one of the more specific {@code from} methods, according to the
   * type of the argument. If the object's type is not covered by any of the other
   * {@code from} methods an {@link IllegalArgumentException} is thrown.
   *
   * @param obj the object to convert
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(Object obj) {
<span class="fc" id="L54">    return INSTANCE.test(obj);</span>
  }

  /**
   * Converts the specified {@code String} to a {@code Boolean} value. This method
   * checks whether the argument is either one of {@link #TRUE_STRINGS} or one of
   * {@link #FALSE_STRINGS} (ignoring case).
   *
   * @param s the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(String s) {
<span class="fc" id="L66">    return INSTANCE.test(s);</span>
  }

  /**
   * Returns {@code true} if the specified string is {@code null} or one of the
   * string that count as {@code true} or {@code false}.
   *
   * @param s the string to evaluate
   * @return whether the specified string is one of the string that count as
   *     {@code true} or {@code false}
   */
  public static boolean isConvertible(String s) {
<span class="fc" id="L78">    return INSTANCE.isBoolean(s);</span>
  }

  /**
   * Converts the specified {@code Number} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(Number n) {
<span class="fc" id="L88">    return INSTANCE.test(n);</span>
  }

  /**
   * Converts the specified {@code int} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(int n) {
<span class="fc" id="L98">    return INSTANCE.test(n);</span>
  }

  /**
   * Converts the specified {@code character} to a {@code Boolean} value.
   *
   * @param c the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(char c) {
<span class="fc" id="L108">    return INSTANCE.test(c);</span>
  }

  /**
   * Converts the specified {@code double} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(double n) {
<span class="fc" id="L118">    return INSTANCE.test(n);</span>
  }

  /**
   * Converts the specified {@code long} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(long n) {
<span class="fc" id="L128">    return INSTANCE.test(n);</span>
  }

  /**
   * Converts the specified {@code float} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(float n) {
<span class="fc" id="L138">    return INSTANCE.test(n);</span>
  }

  /**
   * Converts the specified {@code short} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(short n) {
<span class="fc" id="L148">    return INSTANCE.test(n);</span>
  }

  /**
   * Converts the specified {@code Number} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public static Boolean from(byte n) {
<span class="fc" id="L158">    return INSTANCE.test(n);</span>
  }

<span class="fc" id="L161">  private static final Bool INSTANCE = new Bool();</span>

  private final Set&lt;String&gt; trueStrings;
  private final Set&lt;String&gt; falseStrings;

  private Bool() {
<span class="fc" id="L167">    this(TRUE_STRINGS, FALSE_STRINGS);</span>
<span class="fc" id="L168">  }</span>

  /**
   * Creates a new {@code Bool} instance that will use the provided {@code true}
   * strings and {@code false} strings to evaluate {@code String} arguments.
   *
   * @param trueStrings the string values that must count as {@code true}
   * @param falseStrings the string values that must count as {@code false}
   */
<span class="fc" id="L177">  public Bool(Set&lt;String&gt; trueStrings, Set&lt;String&gt; falseStrings) {</span>
<span class="fc" id="L178">    this.trueStrings = trueStrings;</span>
<span class="fc" id="L179">    this.falseStrings = falseStrings;</span>
<span class="fc" id="L180">  }</span>

  /**
   * Attempts to convert the specified object to a {@code Boolean}. This is done by
   * delegating to one of the more specific {@code getBoolean} methods, according to
   * the type of the argument. If the object's type is not covered by any of the
   * other {@code getBoolean} methods, a {@link TypeConversionException} is thrown.
   *
   * @param obj the object to convert
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(Object obj) {
<span class="fc bfc" id="L192" title="All 2 branches covered.">    return obj == null</span>
<span class="fc" id="L193">        ? FALSE</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">        : obj.getClass() == Boolean.class</span>
<span class="fc" id="L195">            ? (Boolean) obj</span>
<span class="fc bfc" id="L196" title="All 2 branches covered.">            : obj.getClass() == String.class</span>
<span class="fc" id="L197">                ? test((String) obj)</span>
<span class="fc bfc" id="L198" title="All 2 branches covered.">                : obj instanceof Number</span>
<span class="fc" id="L199">                    ? test((Number) obj)</span>
<span class="pc bpc" id="L200" title="1 of 2 branches missed.">                    : obj.getClass() == Character.class</span>
<span class="fc" id="L201">                        ? test(((Character) obj).charValue())</span>
<span class="nc" id="L202">                        : noCanDo(obj);</span>
  }

  /**
   * Converts the specified {@code String} to a {@code Boolean} value. Null values
   * are allowed and will result in {@code Boolean.FALSE} being returns.
   *
   * @param s the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(String s) {
<span class="fc bfc" id="L213" title="All 4 branches covered.">    if (s == null || falseStrings.contains(s.toLowerCase())) {</span>
<span class="fc" id="L214">      return FALSE;</span>
    }
<span class="fc bfc" id="L216" title="All 2 branches covered.">    if (trueStrings.contains(s.toLowerCase())) {</span>
<span class="fc" id="L217">      return TRUE;</span>
    }
<span class="fc" id="L219">    throw new TypeConversionException(s, Boolean.class);</span>
  }

  /**
   * Returns {@code true} if the specified string is {@code null} or one of the
   * string that count as {@code true} or {@code false}.
   *
   * @param s the string to evaluate
   * @return whether the specified string is {@code null} or one of the string that
   *     count as {@code true} or {@code false}
   */
  public boolean isBoolean(String s) {
<span class="fc bfc" id="L231" title="All 2 branches covered.">    return s == null</span>
<span class="fc bfc" id="L232" title="All 2 branches covered.">        || falseStrings.contains(s.toLowerCase())</span>
<span class="fc bfc" id="L233" title="All 2 branches covered.">        || trueStrings.contains(s.toLowerCase());</span>
  }

  /**
   * Converts the specified {@code Number} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(Number n) {
<span class="fc bfc" id="L243" title="All 2 branches covered.">    if (n == null) {</span>
<span class="fc" id="L244">      return FALSE;</span>
    }
<span class="fc" id="L246">    Integer i = NumberMethods.convert(n, Integer.class);</span>
<span class="pc bpc" id="L247" title="1 of 4 branches missed.">    return i == 1 ? TRUE : i == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code int} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(int n) {
<span class="pc bpc" id="L257" title="1 of 4 branches missed.">    return n == 1 ? TRUE : n == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code double} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(double n) {
<span class="pc bpc" id="L267" title="1 of 4 branches missed.">    return n == 1 ? TRUE : n == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code long} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(long n) {
<span class="pc bpc" id="L277" title="1 of 4 branches missed.">    return n == 1 ? TRUE : n == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code float} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(float n) {
<span class="pc bpc" id="L287" title="1 of 4 branches missed.">    return n == 1 ? TRUE : n == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code short} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(short n) {
<span class="pc bpc" id="L297" title="1 of 4 branches missed.">    return n == 1 ? TRUE : n == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code byte} to a {@code Boolean} value.
   *
   * @param n the value to be converted
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(byte n) {
<span class="pc bpc" id="L307" title="1 of 4 branches missed.">    return n == 1 ? TRUE : n == 0 ? FALSE : noCanDo(n);</span>
  }

  /**
   * Converts the specified {@code char} to a {@code Boolean} value. Returns
   * {@code true} if the argument equals '1'; {@code false} if the argument equals
   * '0'; otherwise throws a {@link TypeConversionException}.
   *
   * @param c The argument
   * @return the corresponding {@code Boolean} value
   */
  public Boolean test(char c) {
<span class="pc bpc" id="L319" title="1 of 4 branches missed.">    return c == '1' ? TRUE : c == '0' ? FALSE : noCanDo(c);</span>
  }

  private static Boolean noCanDo(Object obj) {
<span class="fc" id="L323">    throw new TypeConversionException(obj, Boolean.class);</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>